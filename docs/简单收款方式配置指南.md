# 简单收款方式配置指南

## 快速开始（5分钟完成）

### 方式一：使用收款码图片（推荐）

#### 步骤1：获取个人收款码

**微信收款码**：
1. 打开微信
2. 点击「我」→「支付」→「收付款」
3. 点击「收款码」
4. 截图保存收款码

**支付宝收款码**：
1. 打开支付宝
2. 点击「首页」右上角的「+」
3. 点击「收钱」
4. 截图保存收款码

#### 步骤2：上传收款码到图床

推荐免费图床：
- **ImgBB**：https://imgbb.com/
- **Cloudinary**：https://cloudinary.com/
- **阿里云OSS**：https://www.aliyun.com/product/oss
- **七牛云**：https://www.qiniu.com/

#### 步骤3：配置收款码URL

编辑 `config/payment_config.json` 或 `.env`：

**JSON配置**：
```json
{
    "simple_payment": {
        "wechat_qrcode_url": "https://your-image-host.com/wechat_qrcode.png",
        "alipay_qrcode_url": "https://your-image-host.com/alipay_qrcode.png"
    }
}
```

**环境变量配置**：
```bash
WECHAT_QRCODE_URL=https://your-image-host.com/wechat_qrcode.png
ALIPAY_QRCODE_URL=https://your-image-host.com/alipay_qrcode.png
```

### 方式二：使用账户信息

如果没有图床，可以使用账户信息：

**JSON配置**：
```json
{
    "simple_payment": {
        "wechat_account": "your_wechat_id",
        "alipay_account": "your_alipay_id"
    }
}
```

**环境变量配置**：
```bash
WECHAT_ACCOUNT=your_wechat_id
ALIPAY_ACCOUNT=your_alipay_id
```

## 其他收款方式推荐

### PayJS（聚合支付）

**特点**：
- 支持个人接入
- 提供支付查询接口
- 有完整的后台管理系统
- 手续费：0.38%/笔

**申请流程**：
1. 访问：https://payjs.cn
2. 注册账号
3. 创建应用
4. 获取商户ID和密钥
5. 使用PayJS SDK接入

**优点**：
- 可以查询支付状态
- 自动回调通知
- 支持多种支付方式

**缺点**：
- 需要注册和审核
- 有手续费

### XorPay

**特点**：
- 支持个人接入
- 提供API接口
- 手续费：0.3%/笔

**申请流程**：
1. 访问：https://xorpay.com
2. 注册账号
3. 实名认证
4. 创建应用
5. 获取API密钥

**优点**：
- 功能丰富
- 支持多种支付方式
- 有详细的数据统计

**缺点**：
- 需要实名认证
- 有手续费

### 虎皮椒支付

**特点**：
- 支持个人接入
- 无需营业执照
- 手续费：0.38%/笔

**申请流程**：
1. 访问：https://www.xunhupay.com
2. 注册账号
3. 创建应用
4. 获取商户ID和密钥

**优点**：
- 审核简单
- 接入快速
- 费率较低

**缺点**：
- 功能相对简单
- 有手续费

## 对比推荐

| 方案 | 适合人群 | 速度 | 费用 | 需求 |
|------|---------|------|------|------|
| **个人收款码** | 快速开始 | ⚡5分钟 | 免费 | 无需技术 |
| **PayJS** | 个人商家 | 🕐30分钟 | 0.38% | 需要查询功能 |
| **XorPay** | 专业个人 | 🕐30分钟 | 0.3% | 功能丰富 |
| **虎皮椒** | 初创者 | 🕐20分钟 | 0.38% | 简单快速 |
| **微信支付商户号** | 企业 | 🕓3-7天 | 0.6% | 完整功能 |

## 推荐方案

### 场景1：快速测试（推荐个人收款码）
```
优势：无需申请，立即可用
劣势：需要手动确认支付
适合：测试、小额收款
```

### 场景2：正式运营（推荐PayJS或XorPay）
```
优势：自动回调，可查询状态
劣势：有手续费，需要申请
适合：长期运营，需要自动化
```

### 场景3：企业级（推荐微信支付商户号）
```
优势：功能完整，费率较低
劣势：申请周期长，需要资质
适合：企业，大额收款
```

## 使用示例

### 使用个人收款码

```python
from tools.simple_payment import get_payment_qrcode, confirm_payment

# 1. 获取收款码
result = get_payment_qrcode()
print(result)

# 2. 用户支付后确认
result = confirm_payment(
    payment_proof="已通过微信转账支付",
    contact_info="user@example.com"
)
print(result)
```

### 集成到Agent

修改 `src/agents/agent.py`：

```python
from tools.simple_payment import get_payment_qrcode, confirm_payment

# 在build_agent函数中添加工具
tools = [
    generate_opc_pdf,
    get_wechat_group_info,
    get_payment_qrcode,  # 获取收款码
    confirm_payment      # 确认支付
]
```

### 更新System Prompt

修改 `config/agent_llm_config.json` 中的支付引导部分：

```markdown
## 第四阶段：支付引导
1. 完成推荐后，介绍完整的PDF创业指导文档
2. 调用 `get_payment_qrcode` 工具显示收款码或收款方式
3. 告诉用户扫码或转账支付（68元）
4. 支付完成后，用户告知支付凭证和联系方式
5. 调用 `confirm_payment` 工具确认支付
6. 调用 `generate_opc_pdf` 工具生成PDF
7. 调用 `get_wechat_group_info` 工具获取微信群信息
```

## 收款码美化

为了让收款码更专业，可以使用收款码美化工具：

### 在线工具
- **收款码美化**：https://www.kuaizhan.com/
- **草料二维码**：https://cli.im/
- **联图二维码**：https://www.liantu.com/

### 美化建议
- 添加Logo
- 选择合适的颜色
- 添加边框
- 添加文字说明

### 示例文案
```
【OPC创业指导】
支付金额：68元
请备注：手机号/邮箱

支持微信和支付宝
```

## 安全提示

1. **收款码保护**
   - 不要在公开场合泄露收款码
   - 定期检查收款记录
   - 发现异常及时冻结

2. **确认支付**
   - 核对支付金额
   - 记录支付时间
   - 保存支付凭证

3. **防骗提醒**
   - 不要相信"先支付后退款"
   - 不要点击不明链接
   - 保护个人信息

## 常见问题

### Q1：收款码图片如何上传？

**A**: 使用免费图床服务：
1. 访问 https://imgbb.com/
2. 上传收款码图片
3. 复制图片链接
4. 粘贴到配置文件中

### Q2：如何确认用户已支付？

**A**: 
- 要求用户发送支付截图
- 核对支付金额和时间
- 记录用户信息

### Q3：收款码的有效期是多久？

**A**: 个人收款码长期有效，建议定期更换。

### Q4：如何处理支付争议？

**A**: 
- 保存所有支付凭证
- 记录交易详情
- 及时沟通解决问题

## 下一步

1. ✅ 选择收款方式
2. ✅ 配置收款信息
3. ✅ 测试收款流程
4. ✅ 集成到Agent
5. ✅ 开始收款

## 支持资源

- 微信收款：https://pay.weixin.qq.com
- 支付宝收款：https://b.alipay.com
- PayJS：https://payjs.cn
- XorPay：https://xorpay.com
- 虎皮椒：https://www.xunhupay.com

---

**推荐方案**：如果您想快速开始，使用个人收款码方式最快，只需5分钟即可完成配置！
