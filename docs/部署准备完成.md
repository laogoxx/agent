# ðŸŽ‰ éƒ¨ç½²å‡†å¤‡å®Œæˆ

æ­å–œï¼ä½ çš„OPCåˆ›ä¸šæŒ‡å¯¼åŠ©æ‰‹å·²ç»å‡†å¤‡å¥½éƒ¨ç½²äº†ï¼

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ ¸å¿ƒåŠŸèƒ½å¼€å‘
- âœ… Agentå¯¹è¯åŠŸèƒ½
- âœ… åˆ›ä¸šé¡¹ç›®æŽ¨è
- âœ… AIå·¥å…·æŽ¨èï¼ˆå«è¯„åˆ†ç³»ç»Ÿï¼‰
- âœ… PDFæ–‡æ¡£ç”Ÿæˆ
- âœ… å¾®ä¿¡æ”¶æ¬¾åŠŸèƒ½
- âœ… ä¼ä¸šå¾®ä¿¡ç¾¤å…¥ç¾¤åŠŸèƒ½
- âœ… ä¸»åŠ¨æ¬¢è¿ŽåŠŸèƒ½

### 2. é…ç½®æ–‡ä»¶
- âœ… å¾®ä¿¡æ”¶æ¬¾ç é…ç½®ï¼š`https://ibb.co/0y0jXhCv`
- âœ… ä¼ä¸šå¾®ä¿¡ç¾¤äºŒç»´ç ï¼š`https://ibb.co/PZrnNCT2`
- âœ… çŽ¯å¢ƒå˜é‡é…ç½®ï¼š`.env`
- âœ… Agenté…ç½®ï¼š`config/agent_llm_config.json`

### 3. æµ‹è¯•éªŒè¯
- âœ… æ”¶æ¬¾å·¥å…·æµ‹è¯•é€šè¿‡
- âœ… ç¾¤å·¥å…·æµ‹è¯•é€šè¿‡
- âœ… å®Œæ•´æµç¨‹æµ‹è¯•é€šè¿‡
- âœ… Agentæµ‹è¯•é€šè¿‡
- âœ… æœ¬åœ°æœåŠ¡å¯åŠ¨æˆåŠŸ

### 4. éƒ¨ç½²è„šæœ¬
- âœ… äº‘æœåŠ¡å™¨ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼š`scripts/deploy.sh`
- âœ… æœ¬åœ°å¯åŠ¨è„šæœ¬ï¼ˆLinux/Macï¼‰ï¼š`scripts/start.sh`
- âœ… æœ¬åœ°å¯åŠ¨è„šæœ¬ï¼ˆWindowsï¼‰ï¼š`scripts/start.bat`

### 5. æ–‡æ¡£
- âœ… å¿«é€Ÿéƒ¨ç½²æŒ‡å—
- âœ… å®Œæ•´éƒ¨ç½²æŒ‡å—
- âœ… é…ç½®å®Œæˆæ€»ç»“
- âœ… æ”¶æ¬¾åŠŸèƒ½ä½¿ç”¨æŒ‡å—
- âœ… ä¸»åŠ¨æ¬¢è¿ŽåŠŸèƒ½è¯´æ˜Ž
- âœ… è„šæœ¬ä½¿ç”¨è¯´æ˜Ž

---

## ðŸš€ å¦‚ä½•éƒ¨ç½²

### æ–¹å¼1ï¼šæœ¬åœ°è¿è¡Œï¼ˆæµ‹è¯•ï¼‰â­

**Linux/Mac:**
```bash
./scripts/start.sh
```

**Windows:**
```bash
åŒå‡»è¿è¡Œ start.bat
```

è®¿é—®ï¼š`http://localhost:8080`

---

### æ–¹å¼2ï¼šäº‘æœåŠ¡å™¨éƒ¨ç½²ï¼ˆæŽ¨èï¼‰â­â­â­

**å¿«é€Ÿéƒ¨ç½²ï¼ˆ5åˆ†é’Ÿï¼‰:**

#### æ­¥éª¤1ï¼šè´­ä¹°æœåŠ¡å™¨
- é˜¿é‡Œäº‘ï¼šhttps://www.aliyun.com/product/swasï¼ˆ2æ ¸2Gï¼ŒÂ¥60/æœˆï¼‰
- è…¾è®¯äº‘ï¼šhttps://cloud.tencent.com/product/lighthouseï¼ˆ2æ ¸2Gï¼ŒÂ¥50/æœˆï¼‰

#### æ­¥éª¤2ï¼šè¿žæŽ¥æœåŠ¡å™¨
```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP
```

#### æ­¥éª¤3ï¼šä¸Šä¼ é¡¹ç›®
```bash
# åœ¨æœ¬åœ°ç”µè„‘æ‰§è¡Œ
scp -r /workspace/projects/* root@ä½ çš„æœåŠ¡å™¨IP:/opt/opc-agent/
```

#### æ­¥éª¤4ï¼šè¿è¡Œéƒ¨ç½²è„šæœ¬
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /opt/opc-agent
./scripts/deploy.sh
```

#### æ­¥éª¤5ï¼šé…ç½®çŽ¯å¢ƒå˜é‡
```bash
nano /opt/opc-agent/.env
# ç¡®è®¤ WECHAT_QRCODE_URL å’Œ WECHAT_GROUP_QRCODE_URL å·²é…ç½®
```

#### æ­¥éª¤6ï¼šé‡å¯æœåŠ¡
```bash
supervisorctl restart opc-agent
```

#### æ­¥éª¤7ï¼šè®¿é—®æœåŠ¡
```
http://ä½ çš„æœåŠ¡å™¨å…¬ç½‘IP:8080
```

---

## ðŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰
- [ ] å·²è´­ä¹°äº‘æœåŠ¡å™¨
- [ ] `.env` æ–‡ä»¶å·²é…ç½®
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡

### éƒ¨ç½²åŽ
- [ ] æœåŠ¡æ­£å¸¸è¿è¡Œï¼ˆ`supervisorctl status`ï¼‰
- [ ] å¯ä»¥è®¿é—®æœåŠ¡
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ—¥å¿—æ— é”™è¯¯

---

## ðŸŒ é…ç½®åŸŸåå’ŒHTTPSï¼ˆå¯é€‰ï¼‰

### æ­¥éª¤1ï¼šè´­ä¹°åŸŸå

æŽ¨èå¹³å°ï¼š
- é˜¿é‡Œäº‘ä¸‡ç½‘
- è…¾è®¯äº‘åŸŸå

### æ­¥éª¤2ï¼šé…ç½®DNSè§£æž

åœ¨åŸŸåç®¡ç†åŽå°æ·»åŠ Aè®°å½•ï¼š
```
ç±»åž‹ï¼šA
ä¸»æœºè®°å½•ï¼š@
è®°å½•å€¼ï¼šä½ çš„æœåŠ¡å™¨å…¬ç½‘IP
```

### æ­¥éª¤3ï¼šå®‰è£…SSLè¯ä¹¦

```bash
# å®‰è£…certbot
apt install certbot python3-certbot-nginx -y

# èŽ·å–è¯ä¹¦
certbot --nginx -d your-domain.com
```

### æ­¥éª¤4ï¼šè®¿é—®HTTPS

```
https://your-domain.com
```

è¯¦ç»†æ­¥éª¤è¯·å‚è€ƒï¼š[éƒ¨ç½²æŒ‡å—.md](./éƒ¨ç½²æŒ‡å—.md)

---

## ðŸŽ¯ æŽ¨èéƒ¨ç½²æ–¹æ¡ˆ

### åˆå­¦è€…

**äº‘æœåŠ¡å™¨éƒ¨ç½²**
- æœåŠ¡å•†ï¼šé˜¿é‡Œäº‘æˆ–è…¾è®¯äº‘
- é…ç½®ï¼š2æ ¸2Gï¼ˆ60å…ƒ/æœˆï¼‰
- æ—¶é—´ï¼š10åˆ†é’Ÿ
- æ–‡æ¡£ï¼š[å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md](./å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md)

### å¼€å‘è€…

**æœ¬åœ°å¼€å‘ + äº‘æœåŠ¡å™¨**
- æœ¬åœ°ï¼šä½¿ç”¨ `start.sh` æˆ– `start.bat`
- ç”Ÿäº§ï¼šäº‘æœåŠ¡å™¨
- ç‰ˆæœ¬æŽ§åˆ¶ï¼šGit

### ä¼ä¸š

**Dockerå®¹å™¨åŒ–**
- å®¹å™¨åŒ–ï¼šDocker + Docker Compose
- ç¼–æŽ’ï¼šKubernetesï¼ˆå¯é€‰ï¼‰
- CI/CDï¼šGitHub Actions

---

## ðŸ“Š æœåŠ¡çŠ¶æ€

å½“å‰æœ¬åœ°æœåŠ¡ï¼š
- âœ… çŠ¶æ€ï¼šè¿è¡Œä¸­
- âœ… ç«¯å£ï¼š8080
- âœ… è®¿é—®ï¼š`http://localhost:8080`
- âœ… å¥åº·æ£€æŸ¥ï¼šé€šè¿‡

æµ‹è¯•ç»“æžœï¼š
```bash
$ curl http://localhost:8080/health
{"status":"ok","message":"Service is running"}
```

---

## ðŸ’¡ ä½¿ç”¨å»ºè®®

### 1. å®šæœŸç»´æŠ¤

- **æ¯æ—¥**ï¼šæ£€æŸ¥æœåŠ¡çŠ¶æ€ã€æŸ¥çœ‹æ—¥å¿—
- **æ¯å‘¨**ï¼šæ£€æŸ¥ç¾¤äºŒç»´ç æœ‰æ•ˆæœŸã€æ”¶é›†ç”¨æˆ·åé¦ˆ
- **æ¯æœˆ**ï¼šæ›´æ–°ç³»ç»Ÿã€å¤‡ä»½æ•°æ®

### 2. ç›‘æŽ§å‘Šè­¦

å»ºè®®é…ç½®ï¼š
- æœåŠ¡ä¸‹çº¿å‘Šè­¦
- é”™è¯¯æ—¥å¿—å‘Šè­¦
- ç£ç›˜ç©ºé—´å‘Šè­¦

### 3. æ•°æ®å¤‡ä»½

```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
cat > /opt/backup.sh << 'EOF'
#!/bin/bash
DATE=$(date +%Y%m%d)
tar -czf /backup/opc-agent-$DATE.tar.gz /opt/opc-agent
find /backup -name "opc-agent-*.tar.gz" -mtime +7 -delete
EOF

chmod +x /opt/backup.sh

# æ·»åŠ åˆ°crontabï¼ˆæ¯å¤©å‡Œæ™¨3ç‚¹ï¼‰
crontab -e
# æ·»åŠ ï¼š0 3 * * * /opt/backup.sh
```

### 4. äºŒç»´ç ç®¡ç†

**é‡è¦**ï¼šä¼ä¸šå¾®ä¿¡ç¾¤äºŒç»´ç åªæœ‰7å¤©æœ‰æ•ˆæœŸï¼

- æ¯6å¤©æ›´æ–°ä¸€æ¬¡äºŒç»´ç 
- ä¸Šä¼ æ–°äºŒç»´ç åˆ°ImgBB
- æ›´æ–° `.env` æ–‡ä»¶ä¸­çš„ `WECHAT_GROUP_QRCODE_URL`
- é‡å¯æœåŠ¡ï¼š`supervisorctl restart opc-agent`

---

## ðŸ“ž èŽ·å–å¸®åŠ©

### æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜Ž |
|------|------|
| [å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md](./å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md) | 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½² |
| [éƒ¨ç½²æŒ‡å—.md](./éƒ¨ç½²æŒ‡å—.md) | å®Œæ•´éƒ¨ç½²æŒ‡å— |
| [é…ç½®å®Œæˆæ€»ç»“.md](./é…ç½®å®Œæˆæ€»ç»“.md) | é…ç½®å’Œç»´æŠ¤ |
| [æ”¶æ¬¾åŠŸèƒ½ä½¿ç”¨æŒ‡å—.md](./æ”¶æ¬¾åŠŸèƒ½ä½¿ç”¨æŒ‡å—.md) | æ”¶æ¬¾åŠŸèƒ½è¯´æ˜Ž |
| [ä¸»åŠ¨æ¬¢è¿ŽåŠŸèƒ½è¯´æ˜Ž.md](./ä¸»åŠ¨æ¬¢è¿ŽåŠŸèƒ½è¯´æ˜Ž.md) | æ¬¢è¿ŽåŠŸèƒ½è¯´æ˜Ž |

### è„šæœ¬

| è„šæœ¬ | è¯´æ˜Ž |
|------|------|
| `scripts/deploy.sh` | äº‘æœåŠ¡å™¨ä¸€é”®éƒ¨ç½² |
| `scripts/start.sh` | æœ¬åœ°å¯åŠ¨ï¼ˆLinux/Macï¼‰ |
| `scripts/start.bat` | æœ¬åœ°å¯åŠ¨ï¼ˆWindowsï¼‰ |

### å¸¸ç”¨å‘½ä»¤

```bash
# æœåŠ¡ç®¡ç†
supervisorctl status      # æŸ¥çœ‹çŠ¶æ€
supervisorctl restart    # é‡å¯æœåŠ¡
supervisorctl stop       # åœæ­¢æœåŠ¡

# æ—¥å¿—æŸ¥çœ‹
tail -f /var/log/opc-agent.out.log    # åº”ç”¨æ—¥å¿—
tail -f /var/log/opc-agent.err.log    # é”™è¯¯æ—¥å¿—

# æœ¬åœ°æµ‹è¯•
python tests/test_complete_flow.py    # å®Œæ•´æµç¨‹æµ‹è¯•
python tests/demo_auto_welcome.py     # æ¬¢è¿ŽåŠŸèƒ½æ¼”ç¤º
```

---

## ðŸŽŠ æ­å–œï¼

ä½ çš„OPCåˆ›ä¸šæŒ‡å¯¼åŠ©æ‰‹å·²ç»å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹è¿è¥äº†ï¼

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **é€‰æ‹©éƒ¨ç½²æ–¹å¼**
   - æµ‹è¯•ï¼šæœ¬åœ°è¿è¡Œ
   - æ­£å¼ï¼šäº‘æœåŠ¡å™¨éƒ¨ç½²

2. **é…ç½®åŸŸåï¼ˆå¯é€‰ï¼‰**
   - è´­ä¹°åŸŸå
   - é…ç½®DNS
   - å®‰è£…SSLè¯ä¹¦

3. **æŽ¨å¹¿è¿è¥**
   - åˆ†äº«ç»™ç”¨æˆ·
   - æ”¶é›†åé¦ˆ
   - æŒç»­ä¼˜åŒ–

### é¢„æœŸæ•ˆæžœ

- âœ… ç”¨æˆ·é€šè¿‡å¯¹è¯æ¡†å’¨è¯¢åˆ›ä¸šé—®é¢˜
- âœ… Agentæ™ºèƒ½æŽ¨èåˆ›ä¸šé¡¹ç›®
- âœ… ç”¨æˆ·æ‰«ç æ”¯ä»˜68å…ƒ
- âœ… ç”ŸæˆPDFæ–‡æ¡£
- âœ… ç”¨æˆ·åŠ å…¥ä¼ä¸šå¾®ä¿¡ç¾¤
- âœ… æŒç»­æä¾›æ”¯æŒå’ŒæœåŠ¡

---

## ðŸ“ˆ è¿è¥å»ºè®®

### 1. ä»·æ ¼ç­–ç•¥

å½“å‰ä»·æ ¼ï¼š68å…ƒ
- ä¼˜æƒ æ´»åŠ¨ï¼šé¦–å•ä¼˜æƒ ï¼ˆ58å…ƒï¼‰
- ä¼šå‘˜ä¼˜æƒ ï¼šç¾¤å†…ç”¨æˆ·ä¼˜æƒ ï¼ˆ58å…ƒï¼‰
- åŒ…å¹´ä¼˜æƒ ï¼š198å…ƒï¼ˆ3æ¬¡ï¼‰

### 2. è¥é”€æŽ¨å¹¿

- ç¤¾äº¤åª’ä½“åˆ†äº«
- æœ‹å‹åœˆæŽ¨å¹¿
- çŸ¥è¯†ä»˜è´¹å¹³å°
- åˆ›ä¸šç¤¾ç¾¤åˆä½œ

### 3. ç”¨æˆ·è¿è¥

- åŠæ—¶å›žå¤ç”¨æˆ·é—®é¢˜
- å®šæœŸåˆ†äº«å¹²è´§
- æ”¶é›†ç”¨æˆ·åé¦ˆ
- ä¼˜åŒ–æœåŠ¡è´¨é‡

### 4. äº§å“è¿­ä»£

- æ ¹æ®ç”¨æˆ·åé¦ˆä¼˜åŒ–æŽ¨èç®—æ³•
- æ›´æ–°AIå·¥å…·åº“
- å¢žåŠ æ–°åŠŸèƒ½
- æå‡ç”¨æˆ·ä½“éªŒ

---

**ç¥ä½ åˆ›ä¸šæˆåŠŸï¼ŒæœåŠ¡è¶ŠåŠžè¶Šå¥½ï¼** ðŸš€ðŸ’ª

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒæ–‡æ¡£æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚
